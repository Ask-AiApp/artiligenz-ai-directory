@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme variables */
:root {
  --primary: #4F46E5;
  --secondary: #10B981;
  --dark: #1F2937;
  --light: #F9FAFB;

  /* Canvas background (light) */
  --canvas-bg: #FFFFFF; /* or keep --light if you prefer */

  /* Starfield (light) */
  --stars-opa-1: 0.10;
  --stars-opa-2: 0.06;
  --nebula-opa: 0.00;  /* almost invisible on light */
}

.dark {
  --primary: #6366F1;
  --secondary: #34D399;
  --dark: #111827;
  --light: #F3F4F6;

  /* Canvas background (dark, deep space) */
  --canvas-bg: #0b1220; /* <- the same as Skin.styles() */

  /* Starfield (dark) */
  --stars-opa-1: 0.28;
  --stars-opa-2: 0.18;
  --nebula-opa: 0.10;  /* faint blue haze */
}

body { @apply text-gray-800 dark:text-gray-200; }

/* Canvas */
#cy {
  @apply rounded-lg;
  background: var(--canvas-bg);
  width: 100%;
  height: 100%;
  min-height: 600px;

  /* enable starfield layers to sit behind cytoscape content */
  position: relative;
  overflow: hidden; /* keep layers clipped to canvas */
}

/* ===== Starfield layers (VIEW ADJUSTMENT) =====
   Two drifting star layers + super-subtle blue nebula.
   Pure CSS, very light; disabled for prefers-reduced-motion.
*/
#cy::before,
#cy::after {
  content: "";
  position: absolute;
  inset: -10%;              /* extend a bit to avoid edge pop-in */
  pointer-events: none;
  z-index: 0;               /* behind Cytoscapeâ€™s renderer */
  mix-blend-mode: screen;
}
#cy::before {
  /* fine stars */
  background:
    radial-gradient(circle at 20% 30%, rgba(120,180,255,var(--nebula-opa)) 0 20%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(60,120,255,var(--nebula-opa)) 0 18%, transparent 38%),
    radial-gradient(2px 2px at 0 0, rgba(255,255,255,var(--stars-opa-1)) 50%, transparent 52%) 0 0 / 3px 3px,
    radial-gradient(1px 1px at 0 0, rgba(255,255,255,var(--stars-opa-2)) 50%, transparent 52%) 0 0 / 2px 2px;
  animation: stars-drift-1 160s linear infinite;
}
#cy::after {
  /* sparse, slightly larger stars */
  background:
    radial-gradient(2px 2px at 0 0, rgba(255,255,255,var(--stars-opa-2)) 50%, transparent 52%) 0 0 / 6px 6px,
    radial-gradient(1.5px 1.5px at 0 0, rgba(255,255,255,var(--stars-opa-2)) 50%, transparent 52%) 0 0 / 5px 5px;
  animation: stars-drift-2 240s linear infinite reverse;
}

@keyframes stars-drift-1 {
  0%   { transform: translate3d(0,   0, 0) rotate(0.001deg); }
  100% { transform: translate3d(-6%, -8%, 0) rotate(0.001deg); }
}
@keyframes stars-drift-2 {
  0%   { transform: translate3d(0,   0, 0) rotate(0.001deg); }
  100% { transform: translate3d(6%,  8%, 0) rotate(0.001deg); }
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  #cy::before, #cy::after { animation: none; }
}

/* (rest unchanged) */
.node {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: var(--primary);
  box-shadow: 0 0 0 2px white;
}

.edge {
  width: 2px;
  background-color: var(--secondary);
  opacity: 0.6;
}
.node-highlighted { box-shadow: 0 0 15px 8px rgba(99, 102, 241, 0.7); z-index: 999; transition: box-shadow 0.3s ease; }
.pinned { border: 3px solid var(--secondary) !important; }
.edge[relation="competes-with"] { line-style: dashed; }
.edge[relation="partners-with"] { line-style: solid; }
.cluster-halo { background-color: rgba(99, 102, 241, 0.1); border-radius: 50%; border: 2px dashed rgba(99, 102, 241, 0.5); transition: all 0.3s ease; }
.cluster-badge { transition: opacity 0.3s ease, transform 0.3s ease; will-change: opacity, transform; }
@keyframes pulse-halo { 0%{opacity:.1;transform:scale(1)}50%{opacity:.3;transform:scale(1.05)}100%{opacity:.1;transform:scale(1)} }
.pulse-halo { animation: pulse-halo 2s ease-in-out; }
.edge-highlighted { background-color: var(--secondary); opacity: 1; width: 4px; transition: all 0.3s ease; }
#node-tooltip {
  pointer-events: none; transition: opacity .2s ease;
  box-shadow: 0 4px 6px -1px rgba(0,0,0,.1), 0 2px 4px -1px rgba(0,0,0,.06);
  border-radius: .5rem; padding: .5rem; background: white; color: #1f2937;
  font-size: .875rem; line-height: 1.25rem;
}
.dark #node-tooltip { background: #1f2937; color: #f3f4f6; }
